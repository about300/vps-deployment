<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LOVE - çˆ±çš„å¥‘çº¦</title>
  <meta name="description" content="ã€ŒMY loveğŸ˜å°é»é»ã€">
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;600;700&family=Source+Sans+Pro:wght@300;400;600;700&display=swap" rel="stylesheet">
</head>
<body>

  <!-- å¯¼èˆªæ  -->
  <nav class="navbar">
    <div class="container">
      <div class="nav-brand">
        <i class="fas fa-server"></i>
        <a href="/">LOVE</a>
      </div>
      <div class="nav-menu">
        <a href="/" class="nav-link active">é¦–é¡µ</a>
        <a href="/subconvert/" class="nav-link">è®¢é˜…è½¬æ¢</a>
        <a id="sui-nav-link" href="#" class="nav-link" target="_blank">S-UIé¢æ¿</a>
        <a href="#services" class="nav-link">æœåŠ¡çŠ¶æ€</a>
        <a href="https://github.com/about300" class="nav-link" target="_blank">
          <i class="fab fa-github"></i> GitHub
        </a>
      </div>
    </div>
  </nav>

  <!-- å¤´éƒ¨ -->
  <header class="page-header">
    <div class="container">
      <h1 class="page-title">çˆ±çš„å¥‘çº¦</h1>
      <p class="page-subtitle">ã€ŒMY loveğŸ˜å°é»é»ã€</p>
    </div>
  </header>

  <!-- ä¸»è¦å†…å®¹ -->
  <main class="container main-content">

    <!-- æœç´¢æ¡† -->
    <div class="search-section">
      <div class="search-container">
        <form id="search-form" action="https://www.google.com/search" method="GET" target="_blank">
          <div class="search-box">
            <i class="fas fa-search"></i>
            <input type="text" name="q" id="search-input" placeholder="æœç´¢å·¥å…·ã€æœåŠ¡æˆ–é…ç½®..." autocomplete="off">
            <button type="submit" class="search-btn">æœç´¢</button>
          </div>
        </form>
        <div class="search-results" id="search-results"></div>
      </div>
    </div>

    <!-- å¿«é€Ÿå·¥å…·å¡ç‰‡ -->
    <section class="tools-section">
      <h2 class="section-title">
        <i class="fas fa-rocket"></i> å¿«é€Ÿè®¿é—®
      </h2>
      <div class="tools-grid">
        <a href="/subconvert/" class="tool-card">
          <div class="tool-icon"><i class="fas fa-exchange-alt"></i></div>
          <div class="tool-content">
            <h3 class="tool-title">è®¢é˜…è½¬æ¢</h3>
            <p class="tool-desc">è½¬æ¢å„ç§è®¢é˜…æ ¼å¼ï¼Œæ”¯æŒ Clashã€Quantumult Xã€V2Ray ç­‰</p>
          </div>
        </a>

        <!-- S-UI å¡ç‰‡ -->
        <a id="sui-card-link" href="#" target="_blank" class="tool-card">
          <div class="tool-icon"><i class="fas fa-tachometer-alt"></i></div>
          <div class="tool-content">
            <h3 class="tool-title">S-UI é¢æ¿</h3>
            <p class="tool-desc">èŠ‚ç‚¹ç®¡ç†å’Œæµé‡ç›‘æ§ï¼Œæ”¯æŒå¤šç”¨æˆ·ç®¡ç†å’Œå®æ—¶ç»Ÿè®¡</p>
          </div>
        </a>

        <a id="adguard-link" href="#" target="_blank" class="tool-card">
          <div class="tool-icon"><i class="fas fa-shield-alt"></i></div>
          <div class="tool-content">
            <h3 class="tool-title">AdGuard Home</h3>
            <p class="tool-desc">ç½‘ç»œå¹¿å‘Šå’Œè·Ÿè¸ªå™¨æ‹¦æˆªï¼ŒDNS-over-HTTPS/TLS æœåŠ¡</p>
          </div>
        </a>
      </div>
    </section>

    <!-- æœåŠ¡çŠ¶æ€ -->
    <section class="services-section" id="services">
      <h2 class="section-title"><i class="fas fa-heartbeat"></i> æœåŠ¡çŠ¶æ€</h2>
      <div class="services-grid" id="services-grid">
        <div class="service-card loading"><div class="service-icon"><i class="fas fa-spinner fa-spin"></i></div><p class="service-text">æ­£åœ¨æ£€æµ‹æœåŠ¡çŠ¶æ€...</p></div>
      </div>
    </section>

  </main>

  <script>
    // è·å–Bingçš„æ¯æ—¥èƒŒæ™¯å›¾å¹¶è®¾ç½®ä¸ºé¡µé¢èƒŒæ™¯
    fetch('https://cors-anywhere.herokuapp.com/https://www.bing.com/HPImageArchive.aspx?format=js&idx=0&n=1')
      .then(response => response.json())
      .then(data => {
        const imageUrl = "https://www.bing.com" + data.images[0].url;
        document.body.style.backgroundImage = `url(${imageUrl})`;  // è®¾ç½®åŠ¨æ€èƒŒæ™¯å›¾
      })
      .catch(error => {
        console.log('æ— æ³•è·å–èƒŒæ™¯å›¾:', error);
        // å¦‚æœå¤±è´¥ï¼Œä½¿ç”¨æœ¬åœ°å›¾åƒä½œä¸ºå ä½å›¾
        document.body.style.backgroundImage = 'url("path/to/local/background.jpg")';  // æ›¿æ¢ä¸ºæœ¬åœ°å›¾ç‰‡è·¯å¾„
      });

    document.addEventListener('DOMContentLoaded', () => {
      const host = window.location.hostname || '127.0.0.1';
      const protocol = window.location.protocol === 'file:' ? 'http:' : window.location.protocol;

      // æœ¬åœ°æµ‹è¯•æ—¶ï¼Œä½¿ç”¨ localhost æˆ–æœ¬åœ°ç«¯å£
      const suiUrl = `${protocol}//${host}:2095/app`;
      const adguardUrl = `${protocol}//${host}:3000`;

      const suiNav = document.getElementById('sui-nav-link');
      const suiCard = document.getElementById('sui-card-link');
      const adguardCard = document.getElementById('adguard-link');

      if (suiNav) suiNav.href = suiUrl; // å¦‚æœæ— æ³•è®¿é—®ï¼Œé“¾æ¥å°†æŒ‡å‘æœ¬åœ°æµ‹è¯•ç«¯å£
      if (suiCard) suiCard.href = suiUrl;
      if (adguardCard) adguardCard.href = adguardUrl;

      checkServices();
    });

    async function checkServices() {
      const servicesGrid = document.getElementById('services-grid');
      if (!servicesGrid) return;

      const services = [
        { name: 'Web æœåŠ¡', url: '/', icon: 'fas fa-globe' },
        { name: 'è®¢é˜…è½¬æ¢', url: '/subconvert/', icon: 'fas fa-exchange-alt' },
        { name: 'S-UI é¢æ¿', url: '/sui/', icon: 'fas fa-tachometer-alt' },
        { name: 'AdGuard Home', url: '/adguard/', icon: 'fas fa-shield-alt' }
      ];

      servicesGrid.innerHTML = '';

      for (const svc of services) {
        const card = document.createElement('div');
        card.className = 'service-card loading';
        const icon = document.createElement('div');
        icon.className = 'service-icon';
        icon.innerHTML = `<i class="${svc.icon}"></i>`;

        const title = document.createElement('h3');
        title.className = 'service-text';
        title.textContent = svc.name;

        const statusP = document.createElement('p');
        statusP.className = 'service-details';
        statusP.textContent = 'æ£€æµ‹ä¸­...';

        card.appendChild(icon);
        card.appendChild(title);
        card.appendChild(statusP);
        servicesGrid.appendChild(card);

        // åšä¸€æ¬¡è¯·æ±‚åˆ¤æ–­æ˜¯å¦åœ¨çº¿ï¼ˆåŒæº / ç›¸å¯¹è·¯å¾„ä¼˜å…ˆï¼‰
        try {
          let res;
          res = await fetch(svc.url, { method: 'HEAD' });

          if (res.ok || res.status === 200 || res.status === 302) {
            statusP.textContent = 'è¿è¡Œæ­£å¸¸';
            card.classList.remove('loading');
            card.classList.add('online');
          } else {
            statusP.textContent = `å“åº”å¼‚å¸¸ (${res.status})`;
            card.classList.remove('loading');
            card.classList.add('offline');
          }
        } catch (err) {
          statusP.textContent = 'ç¦»çº¿ / è¶…æ—¶';
          card.classList.remove('loading');
          card.classList.add('offline');
        }
      }
    }
  </script>

</body>
</html>
